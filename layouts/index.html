{{ define "main" }}
<div class="mx-auto max-w-6xl px-6 pb-8">
  
  <!-- Hero Section -->
  <div class="mb-12 text-center">
    <h1 class="mb-4 text-4xl font-bold tracking-tight text-gray-900 dark:text-white sm:text-5xl">
      üõ°Ô∏è Adobe Security Intelligence Hub
    </h1>
    <p class="mb-8 text-xl text-gray-600 dark:text-gray-300">
      Stay ahead of security threats with real-time Adobe security bulletins and expert analysis.
    </p>
    <p class="mb-8 text-lg text-gray-500 dark:text-gray-400">
      Your comprehensive source for Adobe Commerce, Experience Manager, and Experience Platform security updates - automatically curated and delivered.
    </p>
    <a href="/bulletins/" class="inline-flex items-center px-6 py-3 text-base font-medium text-white bg-blue-600 border border-transparent rounded-md shadow-sm hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500">
      View Security Bulletins ‚Üí
    </a>
  </div>

  <!-- Critical Alert Banner -->
  <div class="mb-8 rounded-lg bg-red-50 p-4 dark:bg-red-900/20">
    <div class="flex">
      <div class="flex-shrink-0">
        <span class="text-2xl">üî•</span>
      </div>
      <div class="ml-3">
        <h3 class="text-sm font-medium text-red-800 dark:text-red-200">
          Critical Security Updates Available
        </h3>
        <div class="mt-2 text-sm text-red-700 dark:text-red-300">
          <p>New security bulletins are available for Adobe products. Review the latest patches and updates to keep your systems secure.</p>
        </div>
      </div>
    </div>
  </div>

  <!-- Recent Bulletins Section -->
  {{ $bulletins := where .Site.Pages "Section" "bulletins" }}
  {{ $bulletins = where $bulletins "Kind" "page" }}
  {{ $recentBulletins := first 6 (sort $bulletins ".Date" "desc") }}
  
  {{ if $recentBulletins }}
  <div class="mb-12">
    <h2 class="mb-6 text-2xl font-bold text-gray-900 dark:text-white">
      üìã Recent Security Bulletins
    </h2>
    <div class="grid gap-6 md:grid-cols-2 lg:grid-cols-3">
      {{ range $recentBulletins }}
      <div class="rounded-lg border border-gray-200 bg-white p-6 shadow-sm dark:border-gray-700 dark:bg-gray-800">
        <div class="flex items-start justify-between">
          <div class="flex-1">
            {{ $priority := .Params.priority | default 2 }}
            {{ $priorityColor := "bg-yellow-100 text-yellow-800" }}
            {{ $priorityIcon := "‚ö†Ô∏è" }}
            {{ if eq $priority 1 }}
              {{ $priorityColor = "bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-300" }}
              {{ $priorityIcon = "üö®" }}
            {{ else if eq $priority 2 }}
              {{ $priorityColor = "bg-orange-100 text-orange-800 dark:bg-orange-900/20 dark:text-orange-300" }}
              {{ $priorityIcon = "‚ö†Ô∏è" }}
            {{ else if eq $priority 3 }}
              {{ $priorityColor = "bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-300" }}
              {{ $priorityIcon = "‚ÑπÔ∏è" }}
            {{ else }}
              {{ $priorityColor = "bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300" }}
              {{ $priorityIcon = "üìù" }}
            {{ end }}
            
            <span class="inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium {{ $priorityColor }}">
              {{ $priorityIcon }} {{ .Params.priority_label | default "Unknown" }}
            </span>
          </div>
          <time class="text-sm text-gray-500 dark:text-gray-400" datetime="{{ .Date.Format "2006-01-02" }}">
            {{ .Date.Format "Jan 2" }}
          </time>
        </div>
        
        <h3 class="mt-3 text-lg font-semibold">
          <a href="{{ .RelPermalink }}" class="text-gray-900 hover:text-blue-600 dark:text-white dark:hover:text-blue-400">
            {{ if .Params.cves }}
              {{ if eq (len .Params.cves) 1 }}
                {{ index .Params.cves 0 }}
              {{ else }}
                {{ index .Params.cves 0 }} +{{ sub (len .Params.cves) 1 }} more
              {{ end }}
            {{ else if .Params.bulletin_id }}
              {{ .Params.bulletin_id }}
            {{ else if .Params.apsb_id }}
              {{ .Params.apsb_id }}
            {{ else }}
              {{ .Params.product }} Security Update
            {{ end }}
          </a>
        </h3>
        
        <p class="mt-2 text-sm text-gray-600 dark:text-gray-300 line-clamp-2">
          {{ .Params.product }}
          {{ if .Params.bulletin_id }}
            ‚Ä¢ {{ .Params.bulletin_id }}
          {{ end }}
          {{ if .Params.cvss_max }}
            ‚Ä¢ CVSS {{ .Params.cvss_max }}
          {{ end }}
          {{ if .Params.affected_versions }}
            ‚Ä¢ {{ len .Params.affected_versions }} version{{ if gt (len .Params.affected_versions) 1 }}s{{ end }}
          {{ end }}
        </p>
        
        <div class="mt-3 flex flex-wrap gap-1">
          {{ if .Params.affected_versions }}
            {{ range first 2 .Params.affected_versions }}
            <span class="inline-flex items-center rounded bg-blue-100 px-2 py-0.5 text-xs font-medium text-blue-800 dark:bg-blue-900/20 dark:text-blue-300">
              {{ .version }}
            </span>
            {{ end }}
            {{ if gt (len .Params.affected_versions) 2 }}
            <span class="inline-flex items-center rounded bg-blue-100 px-2 py-0.5 text-xs font-medium text-blue-800 dark:bg-blue-900/20 dark:text-blue-300">
              +{{ sub (len .Params.affected_versions) 2 }} more
            </span>
            {{ end }}
          {{ else if .Params.cves }}
            {{ if gt (len .Params.cves) 1 }}
              {{ range first 2 (slice .Params.cves 1) }}
              <span class="inline-flex items-center rounded bg-gray-100 px-2 py-0.5 text-xs font-medium text-gray-800 dark:bg-gray-700 dark:text-gray-300">
                {{ . }}
              </span>
              {{ end }}
              {{ if gt (len .Params.cves) 3 }}
              <span class="inline-flex items-centers rounded bg-gray-100 px-2 py-0.5 text-xs font-medium text-gray-800 dark:bg-gray-700 dark:text-gray-300">
                +{{ sub (len .Params.cves) 3 }} more
              </span>
              {{ end }}
            {{ end }}
          {{ end }}
        </div>
      </div>
      {{ end }}
    </div>
    
    <div class="mt-6 text-center">
      <a href="/bulletins/" class="text-blue-600 hover:text-blue-500 dark:text-blue-400 dark:hover:text-blue-300">
        View all security bulletins ‚Üí
      </a>
    </div>
  </div>
  {{ end }}

  <!-- Product Dashboard -->
  <div class="mb-12">
    <h2 class="mb-6 text-2xl font-bold text-gray-900 dark:text-white">
      üìä Security Dashboard
    </h2>
    <div class="grid gap-6 md:grid-cols-3">
      <!-- Adobe Commerce -->
      <a href="/bulletins/commerce/" class="group rounded-lg border border-gray-200 p-6 hover:border-blue-500 hover:shadow-md dark:border-gray-700 dark:hover:border-blue-400">
        <div class="flex items-center">
          <span class="text-3xl">üõí</span>
          <div class="ml-4">
            <h3 class="text-lg font-semibold text-gray-900 group-hover:text-blue-600 dark:text-white dark:group-hover:text-blue-400">
              Adobe Commerce
            </h3>
            <p class="text-sm text-gray-600 dark:text-gray-300">E-commerce Security</p>
          </div>
        </div>
      </a>
      
      <!-- Experience Manager -->
      <a href="/bulletins/experience-manager/" class="group rounded-lg border border-gray-200 p-6 hover:border-blue-500 hover:shadow-md dark:border-gray-700 dark:hover:border-blue-400">
        <div class="flex items-center">
          <span class="text-3xl">üìÑ</span>
          <div class="ml-4">
            <h3 class="text-lg font-semibold text-gray-900 group-hover:text-blue-600 dark:text-white dark:group-hover:text-blue-400">
              Experience Manager
            </h3>
            <p class="text-sm text-gray-600 dark:text-gray-300">CMS Security</p>
          </div>
        </div>
      </a>
      
      <!-- Experience Platform -->
      <a href="/bulletins/experience-platform/" class="group rounded-lg border border-gray-200 p-6 hover:border-blue-500 hover:shadow-md dark:border-gray-700 dark:hover:border-blue-400">
        <div class="flex items-center">
          <span class="text-3xl">üóÑÔ∏è</span>
          <div class="ml-4">
            <h3 class="text-lg font-semibold text-gray-900 group-hover:text-blue-600 dark:text-white dark:group-hover:text-blue-400">
              Experience Platform
            </h3>
            <p class="text-sm text-gray-600 dark:text-gray-300">Data Platform Security</p>
          </div>
        </div>
      </a>
    </div>
  </div>

  <!-- Features Grid -->
  <div class="mb-12">
    <h2 class="mb-6 text-2xl font-bold text-gray-900 dark:text-white">
      üìà Platform Features
    </h2>
    <div class="grid gap-6 md:grid-cols-2 lg:grid-cols-4">
      <div class="rounded-lg border border-gray-200 bg-white p-6 text-center dark:border-gray-700 dark:bg-gray-800">
        <span class="text-3xl">üîç</span>
        <h3 class="mt-2 font-semibold text-gray-900 dark:text-white">Automated Monitoring</h3>
        <p class="mt-1 text-sm text-gray-600 dark:text-gray-300">24/7 security bulletin tracking</p>
      </div>
      
      <div class="rounded-lg border border-gray-200 bg-white p-6 text-center dark:border-gray-700 dark:bg-gray-800">
        <span class="text-3xl">‚ö°</span>
        <h3 class="mt-2 font-semibold text-gray-900 dark:text-white">Real-time Updates</h3>
        <p class="mt-1 text-sm text-gray-600 dark:text-gray-300">Updates every 6 hours</p>
      </div>
      
      <div class="rounded-lg border border-gray-200 bg-white p-6 text-center dark:border-gray-700 dark:bg-gray-800">
        <span class="text-3xl">üì±</span>
        <h3 class="mt-2 font-semibold text-gray-900 dark:text-white">RSS Feeds</h3>
        <p class="mt-1 text-sm text-gray-600 dark:text-gray-300">Stay informed on the go</p>
      </div>
      
      <div class="rounded-lg border border-gray-200 bg-white p-6 text-center dark:border-gray-700 dark:bg-gray-800">
        <span class="text-3xl">üéØ</span>
        <h3 class="mt-2 font-semibold text-gray-900 dark:text-white">Zero Configuration</h3>
        <p class="mt-1 text-sm text-gray-600 dark:text-gray-300">Just subscribe and stay secure</p>
      </div>
    </div>
  </div>

  <!-- RSS Feeds Section -->
  <div class="mb-12 rounded-lg bg-blue-50 p-6 dark:bg-blue-900/20">
    <h2 class="mb-4 text-xl font-bold text-blue-900 dark:text-blue-100">
      üì° Stay Connected
    </h2>
    <p class="mb-4 text-blue-800 dark:text-blue-200">
      Subscribe to our RSS feeds for instant notifications when new security bulletins are published.
    </p>
    <div class="grid gap-4 md:grid-cols-3">
      <a href="/feeds/bulletins.xml" class="flex items-center rounded bg-white p-3 shadow-sm hover:shadow-md dark:bg-gray-800">
        <span class="text-xl">üì°</span>
        <div class="ml-3">
          <div class="font-medium text-gray-900 dark:text-white">All Products Feed</div>
          <div class="text-sm text-gray-500 dark:text-gray-400">Complete security bulletin feed</div>
        </div>
      </a>
      
      <a href="/feeds/commerce-magento.xml" class="flex items-center rounded bg-white p-3 shadow-sm hover:shadow-md dark:bg-gray-800">
        <span class="text-xl">üì°</span>
        <div class="ml-3">
          <div class="font-medium text-gray-900 dark:text-white">Commerce Feed</div>
          <div class="text-sm text-gray-500 dark:text-gray-400">Adobe Commerce specific alerts</div>
        </div>
      </a>
      
      <a href="/feeds/experience-manager.xml" class="flex items-center rounded bg-white p-3 shadow-sm hover:shadow-md dark:bg-gray-800">
        <span class="text-xl">üì°</span>
        <div class="ml-3">
          <div class="font-medium text-gray-900 dark:text-white">AEM Feed</div>
          <div class="text-sm text-gray-500 dark:text-gray-400">Experience Manager alerts</div>
        </div>
      </a>
    </div>
  </div>

  <!-- Disclaimer -->
  <div class="rounded-lg border border-yellow-200 bg-yellow-50 p-4 dark:border-yellow-800 dark:bg-yellow-900/20">
    <div class="flex">
      <span class="text-yellow-600">‚ö†Ô∏è</span>
      <div class="ml-3">
        <h3 class="text-sm font-medium text-yellow-800 dark:text-yellow-200">
          Important Disclaimer
        </h3>
        <div class="mt-2 text-sm text-yellow-700 dark:text-yellow-300">
          <p>
            Adobe Digest is an <strong>unofficial</strong> security bulletin aggregation service. 
            Always refer to <a href="https://helpx.adobe.com/security.html" class="underline hover:no-underline">Adobe's official PSIRT advisories</a> 
            for authoritative security information and official remediation guidance.
          </p>
        </div>
      </div>
    </div>
  </div>

</div>
{{ end }}
